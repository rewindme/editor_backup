

"use strict";

var _interopRequireDefault = require("babel-runtime/helpers/interop-require-default")["default"];

exports.__esModule = true;

var _lineNumbers = require("line-numbers");

var _lineNumbers2 = _interopRequireDefault(_lineNumbers);

var _repeating = require("repeating");

var _repeating2 = _interopRequireDefault(_repeating);

var _jsTokens = require("js-tokens");

var _jsTokens2 = _interopRequireDefault(_jsTokens);

var _esutils = require("esutils");

var _esutils2 = _interopRequireDefault(_esutils);

var _chalk = require("chalk");

var _chalk2 = _interopRequireDefault(_chalk);

/**
 * Chalk styles for token types.
 */

var defs = {
  string: _chalk2["default"].red,
  punctuator: _chalk2["default"].bold,
  curly: _chalk2["default"].green,
  parens: _chalk2["default"].blue.bold,
  square: _chalk2["default"].yellow,
  keyword: _chalk2["default"].cyan,
  number: _chalk2["default"].magenta,
  regex: _chalk2["default"].magenta,
  comment: _chalk2["default"].grey,
  invalid: _chalk2["default"].inverse
};

/**
 * RegExp to test for newlines in terminal.
 */

var NEWLINE = /\r\n|[\n\r\u2028\u2029]/;

/**
 * Get the type of token, specifying punctuator type.
 */

function getTokenType(match) {
  var token = _jsTokens2["default"].matchToToken(match);
  if (token.type === "name" && _esutils2["default"].keyword.isReservedWordES6(token.value)) {
    return "keyword";
  }

  if (token.type === "punctuator") {
    switch (token.value) {
      case "{":
      case "}":
        return "curly";
      case "(":
      case ")":
        return "parens";
      case "[":
      case "]":
        return "square";
    }
  }

  return token.type;
}

/**
 * Highlight `text`.
 */

function highlight(text /*: string*/) {
  return text.replace(_jsTokens2["default"], function () {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var type = getTokenType(args);
    var colorize = defs[type];
    if (colorize) {
      return args[0].split(NEWLINE).map(function (str) {
        return colorize(str);
      }).join("\n");
    } else {
      return args[0];
    }
  });
}

/**
 * Create a code frame, adding line numbers, code highlighting, and pointing to a given position.
 */

exports["default"] = function (rawLines, /*: string*/lineNumber, /*: number*/colNumber /*: number*/) /*: string*/{
  var opts /*: Object*/ = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];

  colNumber = Math.max(colNumber, 0);

  var highlighted = opts.highlightCode && _chalk2["default"].supportsColor;
  if (highlighted) rawLines = highlight(rawLines);

  var lines = rawLines.split(NEWLINE);
  var start = Math.max(lineNumber - 3, 0);
  var end = Math.min(lines.length, lineNumber + 3);

  if (!lineNumber && !colNumber) {
    start = 0;
    end = lines.length;
  }

  var frame = _lineNumbers2["default"](lines.slice(start, end), {
    start: start + 1,
    before: "  ",
    after: " | ",
    transform: function transform(params) {
      if (params.number !== lineNumber) {
        return;
      }

      if (colNumber) {
        params.line += "\n" + params.before + _repeating2["default"](" ", params.width) + params.after + _repeating2["default"](" ", colNumber - 1) + "^";
      }

      params.before = params.before.replace(/^./, ">");
    }
  }).join("\n");

  if (highlighted) {
    return _chalk2["default"].reset(frame);
  } else {
    return frame;
  }
};

module.exports = exports["default"];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXZlci8uYXRvbS9wYWNrYWdlcy9idWlsZC1ndWxwL3NwZWMvZml4dHVyZS9ub2RlX21vZHVsZXNfYmFiZWwvYmFiZWwtY29kZS1mcmFtZS9saWIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxZQUFZLENBQUM7O0FBRWIsSUFBSSxzQkFBc0IsR0FBRyxPQUFPLENBQUMsK0NBQStDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFakcsT0FBTyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7O0FBRTFCLElBQUksWUFBWSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFM0MsSUFBSSxhQUFhLEdBQUcsc0JBQXNCLENBQUMsWUFBWSxDQUFDLENBQUM7O0FBRXpELElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFFdEMsSUFBSSxXQUFXLEdBQUcsc0JBQXNCLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRXJELElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFFckMsSUFBSSxVQUFVLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUFDLENBQUM7O0FBRW5ELElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFbEMsSUFBSSxTQUFTLEdBQUcsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRWpELElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFOUIsSUFBSSxPQUFPLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLENBQUM7Ozs7OztBQU03QyxJQUFJLElBQUksR0FBRztBQUNULFFBQU0sRUFBRSxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRztBQUM5QixZQUFVLEVBQUUsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUk7QUFDbkMsT0FBSyxFQUFFLE9BQU8sQ0FBQyxTQUFTLENB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QyxLQUFLLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO09BQ25KOztBQUVELFlBQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ2xEO0dBQ0YsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFZCxNQUFJLFdBQVcsRUFBRTtBQUNmLFdBQU8sT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUN4QyxNQUFNO0FBQ0wsV0FBTyxLQUFLLENBQUM7R0FDZDtDQUNGLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMiLCJmaWxlIjoiL1VzZXJzL25hdmVyLy5hdG9tL3BhY2thZ2VzL2J1aWxkLWd1bHAvc3BlYy9maXh0dXJlL25vZGVfbW9kdWxlc19iYWJlbC9iYWJlbC1jb2RlLWZyYW1lL2xpYi9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHRcIilbXCJkZWZhdWx0XCJdO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2xpbmVOdW1iZXJzID0gcmVxdWlyZShcImxpbmUtbnVtYmVyc1wiKTtcblxudmFyIF9saW5lTnVtYmVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saW5lTnVtYmVycyk7XG5cbnZhciBfcmVwZWF0aW5nID0gcmVxdWlyZShcInJlcGVhdGluZ1wiKTtcblxudmFyIF9yZXBlYXRpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVwZWF0aW5nKTtcblxudmFyIF9qc1Rva2VucyA9IHJlcXVpcmUoXCJqcy10b2tlbnNcIik7XG5cbnZhciBfanNUb2tlbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfanNUb2tlbnMpO1xuXG52YXIgX2VzdXRpbHMgPSByZXF1aXJlKFwiZXN1dGlsc1wiKTtcblxudmFyIF9lc3V0aWxzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzdXRpbHMpO1xuXG52YXIgX2NoYWxrID0gcmVxdWlyZShcImNoYWxrXCIpO1xuXG52YXIgX2NoYWxrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYWxrKTtcblxuLyoqXG4gKiBDaGFsayBzdHlsZXMgZm9yIHRva2VuIHR5cGVzLlxuICovXG5cbnZhciBkZWZzID0ge1xuICBzdHJpbmc6IF9jaGFsazJbXCJkZWZhdWx0XCJdLnJlZCxcbiAgcHVuY3R1YXRvcjogX2NoYWxrMltcImRlZmF1bHRcIl0uYm9sZCxcbiAgY3VybHk6IF9jaGFsazJbXCJkZWZhdWx0XCJdLmdyZWVuLFxuICBwYXJlbnM6IF9jaGFsazJbXCJkZWZhdWx0XCJdLmJsdWUuYm9sZCxcbiAgc3F1YXJlOiBfY2hhbGsyW1wiZGVmYXVsdFwiXS55ZWxsb3csXG4gIGtleXdvcmQ6IF9jaGFsazJbXCJkZWZhdWx0XCJdLmN5YW4sXG4gIG51bWJlcjogX2NoYWxrMltcImRlZmF1bHRcIl0ubWFnZW50YSxcbiAgcmVnZXg6IF9jaGFsazJbXCJkZWZhdWx0XCJdLm1hZ2VudGEsXG4gIGNvbW1lbnQ6IF9jaGFsazJbXCJkZWZhdWx0XCJdLmdyZXksXG4gIGludmFsaWQ6IF9jaGFsazJbXCJkZWZhdWx0XCJdLmludmVyc2Vcbn07XG5cbi8qKlxuICogUmVnRXhwIHRvIHRlc3QgZm9yIG5ld2xpbmVzIGluIHRlcm1pbmFsLlxuICovXG5cbnZhciBORVdMSU5FID0gL1xcclxcbnxbXFxuXFxyXFx1MjAyOFxcdTIwMjldLztcblxuLyoqXG4gKiBHZXQgdGhlIHR5cGUgb2YgdG9rZW4sIHNwZWNpZnlpbmcgcHVuY3R1YXRvciB0eXBlLlxuICovXG5cbmZ1bmN0aW9uIGdldFRva2VuVHlwZShtYXRjaCkge1xuICB2YXIgdG9rZW4gPSBfanNUb2tlbnMyW1wiZGVmYXVsdFwiXS5tYXRjaFRvVG9rZW4obWF0Y2gpO1xuICBpZiAodG9rZW4udHlwZSA9PT0gXCJuYW1lXCIgJiYgX2VzdXRpbHMyW1wiZGVmYXVsdFwiXS5rZXl3b3JkLmlzUmVzZXJ2ZWRXb3JkRVM2KHRva2VuLnZhbHVlKSkge1xuICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgfVxuXG4gIGlmICh0b2tlbi50eXBlID09PSBcInB1bmN0dWF0b3JcIikge1xuICAgIHN3aXRjaCAodG9rZW4udmFsdWUpIHtcbiAgICAgIGNhc2UgXCJ7XCI6XG4gICAgICBjYXNlIFwifVwiOlxuICAgICAgICByZXR1cm4gXCJjdXJseVwiO1xuICAgICAgY2FzZSBcIihcIjpcbiAgICAgIGNhc2UgXCIpXCI6XG4gICAgICAgIHJldHVybiBcInBhcmVuc1wiO1xuICAgICAgY2FzZSBcIltcIjpcbiAgICAgIGNhc2UgXCJdXCI6XG4gICAgICAgIHJldHVybiBcInNxdWFyZVwiO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0b2tlbi50eXBlO1xufVxuXG4vKipcbiAqIEhpZ2hsaWdodCBgdGV4dGAuXG4gKi9cblxuZnVuY3Rpb24gaGlnaGxpZ2h0KHRleHQgLyo6IHN0cmluZyovKSB7XG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoX2pzVG9rZW5zMltcImRlZmF1bHRcIl0sIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICB2YXIgdHlwZSA9IGdldFRva2VuVHlwZShhcmdzKTtcbiAgICB2YXIgY29sb3JpemUgPSBkZWZzW3R5cGVdO1xuICAgIGlmIChjb2xvcml6ZSkge1xuICAgICAgcmV0dXJuIGFyZ3NbMF0uc3BsaXQoTkVXTElORSkubWFwKGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yaXplKHN0cik7XG4gICAgICB9KS5qb2luKFwiXFxuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXJnc1swXTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGNvZGUgZnJhbWUsIGFkZGluZyBsaW5lIG51bWJlcnMsIGNvZGUgaGlnaGxpZ2h0aW5nLCBhbmQgcG9pbnRpbmcgdG8gYSBnaXZlbiBwb3NpdGlvbi5cbiAqL1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGZ1bmN0aW9uIChyYXdMaW5lcyAvKjogc3RyaW5nKi8sIGxpbmVOdW1iZXIgLyo6IG51bWJlciovLCBjb2xOdW1iZXIgLyo6IG51bWJlciovKSAvKjogc3RyaW5nKi8ge1xuICB2YXIgb3B0cyAvKjogT2JqZWN0Ki8gPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1szXTtcblxuICBjb2xOdW1iZXIgPSBNYXRoLm1heChjb2xOdW1iZXIsIDApO1xuXG4gIHZhciBoaWdobGlnaHRlZCA9IG9wdHMuaGlnaGxpZ2h0Q29kZSAmJiBfY2hhbGsyW1wiZGVmYXVsdFwiXS5zdXBwb3J0c0NvbG9yO1xuICBpZiAoaGlnaGxpZ2h0ZWQpIHJhd0xpbmVzID0gaGlnaGxpZ2h0KHJhd0xpbmVzKTtcblxuICB2YXIgbGluZXMgPSByYXdMaW5lcy5zcGxpdChORVdMSU5FKTtcbiAgdmFyIHN0YXJ0ID0gTWF0aC5tYXgobGluZU51bWJlciAtIDMsIDApO1xuICB2YXIgZW5kID0gTWF0aC5taW4obGluZXMubGVuZ3RoLCBsaW5lTnVtYmVyICsgMyk7XG5cbiAgaWYgKCFsaW5lTnVtYmVyICYmICFjb2xOdW1iZXIpIHtcbiAgICBzdGFydCA9IDA7XG4gICAgZW5kID0gbGluZXMubGVuZ3RoO1xuICB9XG5cbiAgdmFyIGZyYW1lID0gX2xpbmVOdW1iZXJzMltcImRlZmF1bHRcIl0obGluZXMuc2xpY2Uoc3RhcnQsIGVuZCksIHtcbiAgICBzdGFydDogc3RhcnQgKyAxLFxuICAgIGJlZm9yZTogXCIgIFwiLFxuICAgIGFmdGVyOiBcIiB8IFwiLFxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gdHJhbnNmb3JtKHBhcmFtcykge1xuICAgICAgaWYgKHBhcmFtcy5udW1iZXIgIT09IGxpbmVOdW1iZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29sTnVtYmVyKSB7XG4gICAgICAgIHBhcmFtcy5saW5lICs9IFwiXFxuXCIgKyBwYXJhbXMuYmVmb3JlICsgX3JlcGVhdGluZzJbXCJkZWZhdWx0XCJdKFwiIFwiLCBwYXJhbXMud2lkdGgpICsgcGFyYW1zLmFmdGVyICsgX3JlcGVhdGluZzJbXCJkZWZhdWx0XCJdKFwiIFwiLCBjb2xOdW1iZXIgLSAxKSArIFwiXlwiO1xuICAgICAgfVxuXG4gICAgICBwYXJhbXMuYmVmb3JlID0gcGFyYW1zLmJlZm9yZS5yZXBsYWNlKC9eLi8sIFwiPlwiKTtcbiAgICB9XG4gIH0pLmpvaW4oXCJcXG5cIik7XG5cbiAgaWYgKGhpZ2hsaWdodGVkKSB7XG4gICAgcmV0dXJuIF9jaGFsazJbXCJkZWZhdWx0XCJdLnJlc2V0KGZyYW1lKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZnJhbWU7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07Il19
//# sourceURL=/Users/naver/.atom/packages/build-gulp/spec/fixture/node_modules_babel/babel-code-frame/lib/index.js
