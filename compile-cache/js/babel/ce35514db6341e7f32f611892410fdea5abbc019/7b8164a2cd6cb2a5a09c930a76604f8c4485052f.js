

"use strict";

var _classCallCheck = require("babel-runtime/helpers/class-call-check")["default"];

var _interopRequireDefault = require("babel-runtime/helpers/interop-require-default")["default"];

exports.__esModule = true;

var _helpersNormalizeAst = require("../helpers/normalize-ast");

var _helpersNormalizeAst2 = _interopRequireDefault(_helpersNormalizeAst);

var _file = require("./file");

var _file2 = _interopRequireDefault(_file);

var Pipeline = (function () {
  function Pipeline() {
    _classCallCheck(this, Pipeline);
  }

  Pipeline.prototype.lint = function lint(code /*: string*/) {
    var opts /*:: ?: Object*/ = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    opts.code = false;
    opts.mode = "lint";
    return this.transform(code, opts);
  };

  Pipeline.prototype.pretransform = function pretransform(code, /*: string*/opts /*:: ?: Object*/) {
    var file = new _file2["default"](opts, this);
    return file.wrap(code, function () {
      file.addCode(code);
      file.parseCode(code);
      return file;
    });
  };

  Pipeline.prototype.transform = function transform(code, /*: string*/opts /*:: ?: Object*/) {
    var file = new _file2["default"](opts, this);
    return file.wrap(code, function () {
      file.addCode(code);
      file.parseCode(code);
      return file.transform();
    });
  };

  Pipeline.prototype.transformFromAst = function transformFromAst(ast, code, /*: string*/opts /*: Object*/) {
    ast = _helpersNormalizeAst2["default"](ast);

    var file = new _file2["default"](opts, this);
    return file.wrap(code, function () {
      file.addCode(code);
      file.addAst(ast);
      return file.transform();
    });
  };

  return Pipeline;
})();

exports["default"] = Pipeline;
module.exports = exports["default"];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXZlci8uYXRvbS9wYWNrYWdlcy9idWlsZC1ndWxwL3NwZWMvZml4dHVyZS9ub2RlX21vZHVsZXNfYmFiZWwvYmFiZWwtY29yZS9saWIvdHJhbnNmb3JtYXRpb24vcGlwZWxpbmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxZQUFZLENBQUM7O0FBRWIsSUFBSSxlQUFlLEdBQUcsT0FBTyxDQUFDLHdDQUF3QyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7O0FBRW5GLElBQUksc0JBQXNCLEdBQUcsT0FBTyxDQUFDLCtDQUErQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7O0FBRWpHLE9BQU8sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDOztBQUUxQixJQUFJLG9CQUFvQixHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDOztBQUUvRCxJQUFJLHFCQUFxQixHQUFHLHNCQUFzQixDQUFDLG9CQUFvQixDQUFDLENBQUM7O0FBRXpFLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFOUIsSUFBSSxNQUFNLEdBQUcsc0JBQXNCLENBQUMsS0FBSyxDQUFDLENBQUM7O0FBRTNDLElBQUksUUFBUSxHQUFHLENBQUMsWUFBWTtBQUMxQixXQUFTLFFBQVEsR0FBRztBQUNsQixtQkFBZSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztHQUNqQzs7QUFFRCxVQUFRLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxTQUFTLElBQUksQ0FBQyxJQUFJLGVBQWU7QUFDekQsUUFBSSxJQUFJLG9CQUFvQixTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXBHLFFBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO0FBQ2xCLFFBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDO0FBQ25CLFdBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7R0FDbkMsQ0FBQzs7QUFFRixVQUFRLENBQUMsU0FBUyxDQUFDLFlBQVksR0FBRyxTQUFTLFlBQVksQ0FBQyxJQUFJLGNBQWUsSUFBSSxtQkFBbUI7QUFDaEcsUUFBSSxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzdDLFdBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsWUFBWTtBQUNqQyxVQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ25CLFVBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckIsYUFBTyxJQUFJLENBQUM7S0FDYixDQUFDLENBQUM7R0FDSixDQUFDOztBQUVGLFVBQVEsQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLFNBQVMsU0FBUyxDQUFDLElBQUksY0FBZSxJQUFJLG1CQUFtQjtBQUMxRixRQUFJLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDN0MsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxZQUFZO0FBQ2pDLFVBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkIsVUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyQixhQUFPLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztLQUN6QixDQUFDLENBQUM7R0FDSixDQUFDOztBQUVGLFVBQVEsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLEdBQUcsU0FBUyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsSUFBSSxjQUFlLElBQUksZUFBZTtBQUN6RyxPQUFHLEdBQUcscUJBQXFCLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRTVDLFFBQUksSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM3QyxXQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFlBQVk7QUFDakMsVUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNuQixVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2pCLGFBQU8sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0tBQ3pCLENBQUMsQ0FBQztHQUNKLENBQUM7O0FBRUYsU0FBTyxRQUFRLENBQUM7Q0FDakIsQ0FBQSxFQUFHLENBQUM7O0FBRUwsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLFFBQVEsQ0FBQztBQUM5QixNQUFNLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyIsImZpbGUiOiIvVXNlcnMvbmF2ZXIvLmF0b20vcGFja2FnZXMvYnVpbGQtZ3VscC9zcGVjL2ZpeHR1cmUvbm9kZV9tb2R1bGVzX2JhYmVsL2JhYmVsLWNvcmUvbGliL3RyYW5zZm9ybWF0aW9uL3BpcGVsaW5lLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2sgPSByZXF1aXJlKFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2tcIilbXCJkZWZhdWx0XCJdO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHRcIilbXCJkZWZhdWx0XCJdO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2hlbHBlcnNOb3JtYWxpemVBc3QgPSByZXF1aXJlKFwiLi4vaGVscGVycy9ub3JtYWxpemUtYXN0XCIpO1xuXG52YXIgX2hlbHBlcnNOb3JtYWxpemVBc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVscGVyc05vcm1hbGl6ZUFzdCk7XG5cbnZhciBfZmlsZSA9IHJlcXVpcmUoXCIuL2ZpbGVcIik7XG5cbnZhciBfZmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWxlKTtcblxudmFyIFBpcGVsaW5lID0gKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUGlwZWxpbmUoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBpcGVsaW5lKTtcbiAgfVxuXG4gIFBpcGVsaW5lLnByb3RvdHlwZS5saW50ID0gZnVuY3Rpb24gbGludChjb2RlIC8qOiBzdHJpbmcqLykge1xuICAgIHZhciBvcHRzIC8qOjogPzogT2JqZWN0Ki8gPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuICAgIG9wdHMuY29kZSA9IGZhbHNlO1xuICAgIG9wdHMubW9kZSA9IFwibGludFwiO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybShjb2RlLCBvcHRzKTtcbiAgfTtcblxuICBQaXBlbGluZS5wcm90b3R5cGUucHJldHJhbnNmb3JtID0gZnVuY3Rpb24gcHJldHJhbnNmb3JtKGNvZGUgLyo6IHN0cmluZyovLCBvcHRzIC8qOjogPzogT2JqZWN0Ki8pIHtcbiAgICB2YXIgZmlsZSA9IG5ldyBfZmlsZTJbXCJkZWZhdWx0XCJdKG9wdHMsIHRoaXMpO1xuICAgIHJldHVybiBmaWxlLndyYXAoY29kZSwgZnVuY3Rpb24gKCkge1xuICAgICAgZmlsZS5hZGRDb2RlKGNvZGUpO1xuICAgICAgZmlsZS5wYXJzZUNvZGUoY29kZSk7XG4gICAgICByZXR1cm4gZmlsZTtcbiAgICB9KTtcbiAgfTtcblxuICBQaXBlbGluZS5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtKGNvZGUgLyo6IHN0cmluZyovLCBvcHRzIC8qOjogPzogT2JqZWN0Ki8pIHtcbiAgICB2YXIgZmlsZSA9IG5ldyBfZmlsZTJbXCJkZWZhdWx0XCJdKG9wdHMsIHRoaXMpO1xuICAgIHJldHVybiBmaWxlLndyYXAoY29kZSwgZnVuY3Rpb24gKCkge1xuICAgICAgZmlsZS5hZGRDb2RlKGNvZGUpO1xuICAgICAgZmlsZS5wYXJzZUNvZGUoY29kZSk7XG4gICAgICByZXR1cm4gZmlsZS50cmFuc2Zvcm0oKTtcbiAgICB9KTtcbiAgfTtcblxuICBQaXBlbGluZS5wcm90b3R5cGUudHJhbnNmb3JtRnJvbUFzdCA9IGZ1bmN0aW9uIHRyYW5zZm9ybUZyb21Bc3QoYXN0LCBjb2RlIC8qOiBzdHJpbmcqLywgb3B0cyAvKjogT2JqZWN0Ki8pIHtcbiAgICBhc3QgPSBfaGVscGVyc05vcm1hbGl6ZUFzdDJbXCJkZWZhdWx0XCJdKGFzdCk7XG5cbiAgICB2YXIgZmlsZSA9IG5ldyBfZmlsZTJbXCJkZWZhdWx0XCJdKG9wdHMsIHRoaXMpO1xuICAgIHJldHVybiBmaWxlLndyYXAoY29kZSwgZnVuY3Rpb24gKCkge1xuICAgICAgZmlsZS5hZGRDb2RlKGNvZGUpO1xuICAgICAgZmlsZS5hZGRBc3QoYXN0KTtcbiAgICAgIHJldHVybiBmaWxlLnRyYW5zZm9ybSgpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBQaXBlbGluZTtcbn0pKCk7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gUGlwZWxpbmU7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdOyJdfQ==
//# sourceURL=/Users/naver/.atom/packages/build-gulp/spec/fixture/node_modules_babel/babel-core/lib/transformation/pipeline.js
